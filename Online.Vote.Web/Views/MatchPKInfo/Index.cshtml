@using Online.Vote.Domain;
@model IList<MatchPKInfo>
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <div>
        <h3>安排场次</h3>
        @using (Html.BeginForm())
        {
            <p>
                <span>场次名称：</span><input type="text" name="name1" id="addMatch" />
            </p>
            <p>
                <span>选手1：</span>@Html.DropDownList("playerID", new SelectList(ViewBag.player, "ID", "PlayerName"), "请选择")
            </p>
            <p>
                <span>选手2：</span>@Html.DropDownList("playerID", new SelectList( ViewBag.player, "ID", "PlayerName"), "请选择")
            </p>
            <input type="submit" value="添加" name="name2" id="btn1" />
        }
        <h3>场次</h3>
        <table>
            <tr>
                <th>场次</th>
                <th>第一位选手姓名</th>
                <th>第一位选手票数</th>
                <th>第二位选手姓名</th>
                <th>第二位选手票数</th>
                <th>状态</th>
            </tr>
            @if (Model == null || Model.Count() == 0)
            {
                <tr><td colspan="7">没有满足条件的数据！</td></tr>
            }
            else
            {
                foreach (var item in Model)
                {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => item.ID)</td>
                        <td>@Html.DisplayFor(modelItem => item.MatchId.MatchName)</td>
                        <td>@Html.DisplayFor(modelItem => item.FirstPlayerId.PlayerName)</td>
                        <td>@Html.DisplayFor(modelItem => item.SecondPlayerId.PlayerName)</td>
                        <td>@Html.DisplayFor(modelItem => item.SecondPlayerScore)</td>
                        <td>@Html.DisplayFor(modelItem => item.FirstPlayerScore)</td>
                        <td><input type="button" id="btn2" value="关闭" flag="0" /> </td>
                    </tr>
                }
            }
        </table>
    </div>
    <script type="text/javascript">
   $("#btn2").click(function(){
       var flag = $(this).attr("flag");
       switch(flag)
       {
           case "0" : $("#btn2").val("开启"); flag = "1";break;
           case "1" : $("#btn2").val("关闭"); flag = "0";
       }
       $(this).attr("flag",flag);//给标记属性重新赋值
   });
    </script>
</body>
</html>
